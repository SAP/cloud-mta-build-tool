'use strict';

var constants = require('./lib/constants');
var ApplicationContext = require('./lib/ApplicationContext');


exports.STORAGE = constants.STORAGE;

exports.createAppContext = function (options) {
  return new ApplicationContext(options);
};

exports.expressMiddleware = function (appContext) {
  return function createLoggingContext(req, res, next) {
    req.loggingContext = appContext.createRequestContext(req);
    res.setHeader('x-request-id', req.loggingContext.requestId);
    return next();
  };
};

'use strict';

var path = require('path');
var constants = require('./constants');

module.exports = {
  normalizeComponent: normalizeComponent,
  replaceNewLinesOnXSA: replaceNewLinesOnXSA
};

function normalizeComponent(component) {
  var shortComponent = component.replace(process.env.HOME, '');
  var isFilePath = shortComponent !== component;
  if (isFilePath && path.sep === '\\') {
    return shortComponent.replace(/\\/g, '/');
  }
  return shortComponent;
}

function runsOnXSA() {
  return 'XS_BIND_ADDRESS' in process.env;
}

function replaceNewLinesOnXSA(str) {
  if (!runsOnXSA()) {
    return str;
  }
  return str.replace(/(\r\n|\n|\r)/g, constants.NEW_LINE_SEPARATOR);
}

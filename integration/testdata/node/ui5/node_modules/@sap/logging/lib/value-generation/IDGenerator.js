'use strict';

var moment = require('moment');

module.exports = IDGenerator;

function IDGenerator() {
  this._lastUsedTimestamp = null;
  this._counter = 0;
}

IDGenerator.prototype.nextId = function () {
  var currentTimestamp = moment().valueOf();
  if (currentTimestamp === this._lastUsedTimestamp) {
    return currentTimestamp.toString(36) + '.' + (++this._counter).toString(36);
  } else {
    this._counter = 0;
    this._lastUsedTimestamp = currentTimestamp;
    return currentTimestamp.toString(36);
  }
};

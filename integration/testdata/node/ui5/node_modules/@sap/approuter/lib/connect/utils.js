'use strict';

var querystring = require('querystring');
var url = require('url');

module.exports.setPropertiesToRequest = function(req, app) {
  req.app = app;
  req.protocol = req.connection.encrypted ? 'https' : 'http';
  req.query = querystring.parse(url.parse(req.url).query || ''); // needed by passport-oauth
};

'use strict';

var utils = require('../utils');

module.exports = MessageBase;

function MessageBase(content, transport) {
  this._content = content;
  this._content.uuid = utils.uuid();
  this._content.time = new Date().toISOString();
  this._transport = transport;
}

MessageBase.prototype.by = function (user) {
  utils.validate.notEmptyString(user, 'user');
  this._content.user = user;
  return this;
};

MessageBase.prototype.tenant = function (tenant) {
  utils.validate.notEmptyString(tenant, 'tenant');
  this._content.tenant = tenant;
  return this;
};

MessageBase.prototype._validateContent = function () {
  utils.validate.provided(this._content.user, 'user');
};
